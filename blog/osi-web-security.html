<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一文读懂 Web 安全 | 前端日志</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/hero.jpeg">
    <meta name="description" content="前端知识点、面试题、感悟">
    
    <link rel="preload" href="/assets/css/0.styles.a4ed3cf5.css" as="style"><link rel="preload" href="/assets/js/app.f52a01de.js" as="script"><link rel="preload" href="/assets/js/2.aee12845.js" as="script"><link rel="preload" href="/assets/js/98.b9969f81.js" as="script"><link rel="preload" href="/assets/js/4.dbd505c3.js" as="script"><link rel="prefetch" href="/assets/js/10.8f63809d.js"><link rel="prefetch" href="/assets/js/100.8f9616b5.js"><link rel="prefetch" href="/assets/js/101.c7cf53ba.js"><link rel="prefetch" href="/assets/js/102.0795e1c2.js"><link rel="prefetch" href="/assets/js/103.ee0c543f.js"><link rel="prefetch" href="/assets/js/104.fb2d86b6.js"><link rel="prefetch" href="/assets/js/105.bb260b3a.js"><link rel="prefetch" href="/assets/js/106.f1c7dd76.js"><link rel="prefetch" href="/assets/js/107.aa40ca15.js"><link rel="prefetch" href="/assets/js/108.e52c3a4e.js"><link rel="prefetch" href="/assets/js/109.88cb9377.js"><link rel="prefetch" href="/assets/js/11.f3bf506b.js"><link rel="prefetch" href="/assets/js/110.94a68427.js"><link rel="prefetch" href="/assets/js/111.9a8dd9aa.js"><link rel="prefetch" href="/assets/js/112.4166036a.js"><link rel="prefetch" href="/assets/js/113.2939fa58.js"><link rel="prefetch" href="/assets/js/114.e8df4111.js"><link rel="prefetch" href="/assets/js/115.22a95236.js"><link rel="prefetch" href="/assets/js/116.9ff82308.js"><link rel="prefetch" href="/assets/js/117.c7dc4205.js"><link rel="prefetch" href="/assets/js/118.4ffe37e2.js"><link rel="prefetch" href="/assets/js/119.4e9ef028.js"><link rel="prefetch" href="/assets/js/12.5bc2eeb2.js"><link rel="prefetch" href="/assets/js/120.3c6d356f.js"><link rel="prefetch" href="/assets/js/121.c3c09ef1.js"><link rel="prefetch" href="/assets/js/122.39a7fe95.js"><link rel="prefetch" href="/assets/js/123.6a48bdd5.js"><link rel="prefetch" href="/assets/js/124.f9ab6f5d.js"><link rel="prefetch" href="/assets/js/125.ad89e622.js"><link rel="prefetch" href="/assets/js/126.6e597e31.js"><link rel="prefetch" href="/assets/js/127.04aef380.js"><link rel="prefetch" href="/assets/js/128.70201f67.js"><link rel="prefetch" href="/assets/js/129.5ad4e45a.js"><link rel="prefetch" href="/assets/js/13.ecf0fefe.js"><link rel="prefetch" href="/assets/js/14.bd5d5243.js"><link rel="prefetch" href="/assets/js/15.0a719780.js"><link rel="prefetch" href="/assets/js/16.ac38a305.js"><link rel="prefetch" href="/assets/js/17.29c6e14c.js"><link rel="prefetch" href="/assets/js/18.91df6c77.js"><link rel="prefetch" href="/assets/js/19.1f9da1f3.js"><link rel="prefetch" href="/assets/js/20.5c156202.js"><link rel="prefetch" href="/assets/js/21.84bb4b0a.js"><link rel="prefetch" href="/assets/js/22.babac6d0.js"><link rel="prefetch" href="/assets/js/23.31a8e03a.js"><link rel="prefetch" href="/assets/js/24.c13d837b.js"><link rel="prefetch" href="/assets/js/25.991fbba6.js"><link rel="prefetch" href="/assets/js/26.875d1aed.js"><link rel="prefetch" href="/assets/js/27.71de7192.js"><link rel="prefetch" href="/assets/js/28.7ed55e18.js"><link rel="prefetch" href="/assets/js/29.424fd539.js"><link rel="prefetch" href="/assets/js/3.9c1a18bc.js"><link rel="prefetch" href="/assets/js/30.87cb8d49.js"><link rel="prefetch" href="/assets/js/31.f0035bb5.js"><link rel="prefetch" href="/assets/js/32.a69b7fee.js"><link rel="prefetch" href="/assets/js/33.fae117a0.js"><link rel="prefetch" href="/assets/js/34.111c1519.js"><link rel="prefetch" href="/assets/js/35.5cd5fbee.js"><link rel="prefetch" href="/assets/js/36.06d8fa9b.js"><link rel="prefetch" href="/assets/js/37.b55c3a1b.js"><link rel="prefetch" href="/assets/js/38.24ff6f79.js"><link rel="prefetch" href="/assets/js/39.d37d0384.js"><link rel="prefetch" href="/assets/js/40.0e383ea2.js"><link rel="prefetch" href="/assets/js/41.83683207.js"><link rel="prefetch" href="/assets/js/42.f0e09bd9.js"><link rel="prefetch" href="/assets/js/43.42a80392.js"><link rel="prefetch" href="/assets/js/44.c7718cea.js"><link rel="prefetch" href="/assets/js/45.6c4e5893.js"><link rel="prefetch" href="/assets/js/46.63a97d29.js"><link rel="prefetch" href="/assets/js/47.85ac90da.js"><link rel="prefetch" href="/assets/js/48.6e69bdb7.js"><link rel="prefetch" href="/assets/js/49.24e42de8.js"><link rel="prefetch" href="/assets/js/5.150d269d.js"><link rel="prefetch" href="/assets/js/50.28e2b6a7.js"><link rel="prefetch" href="/assets/js/51.420fc262.js"><link rel="prefetch" href="/assets/js/52.af140bfe.js"><link rel="prefetch" href="/assets/js/53.1bb581e0.js"><link rel="prefetch" href="/assets/js/54.67d40816.js"><link rel="prefetch" href="/assets/js/55.5824603e.js"><link rel="prefetch" href="/assets/js/56.3ed03012.js"><link rel="prefetch" href="/assets/js/57.10200283.js"><link rel="prefetch" href="/assets/js/58.7bdc977d.js"><link rel="prefetch" href="/assets/js/59.90eada0b.js"><link rel="prefetch" href="/assets/js/6.896bd4c4.js"><link rel="prefetch" href="/assets/js/60.ce9fa6cb.js"><link rel="prefetch" href="/assets/js/61.a9656aee.js"><link rel="prefetch" href="/assets/js/62.135c3a6f.js"><link rel="prefetch" href="/assets/js/63.9d6833ba.js"><link rel="prefetch" href="/assets/js/64.074295bd.js"><link rel="prefetch" href="/assets/js/65.a0b8d183.js"><link rel="prefetch" href="/assets/js/66.c25895c4.js"><link rel="prefetch" href="/assets/js/67.781d2e72.js"><link rel="prefetch" href="/assets/js/68.57fa5274.js"><link rel="prefetch" href="/assets/js/69.1d4251ea.js"><link rel="prefetch" href="/assets/js/7.2d2fd358.js"><link rel="prefetch" href="/assets/js/70.72c02386.js"><link rel="prefetch" href="/assets/js/71.e0d8348f.js"><link rel="prefetch" href="/assets/js/72.ceabd5d6.js"><link rel="prefetch" href="/assets/js/73.bba00619.js"><link rel="prefetch" href="/assets/js/74.566e9fb3.js"><link rel="prefetch" href="/assets/js/75.e26d2743.js"><link rel="prefetch" href="/assets/js/76.892ed5c3.js"><link rel="prefetch" href="/assets/js/77.18ca8426.js"><link rel="prefetch" href="/assets/js/78.81ba95bd.js"><link rel="prefetch" href="/assets/js/79.e3fd55e9.js"><link rel="prefetch" href="/assets/js/8.e74751fe.js"><link rel="prefetch" href="/assets/js/80.7555de4e.js"><link rel="prefetch" href="/assets/js/81.ce1c920a.js"><link rel="prefetch" href="/assets/js/82.d2570422.js"><link rel="prefetch" href="/assets/js/83.dadd3e54.js"><link rel="prefetch" href="/assets/js/84.ffc6f7af.js"><link rel="prefetch" href="/assets/js/85.8210cf28.js"><link rel="prefetch" href="/assets/js/86.4c72f9e3.js"><link rel="prefetch" href="/assets/js/87.33efd1ba.js"><link rel="prefetch" href="/assets/js/88.9f21cfa6.js"><link rel="prefetch" href="/assets/js/89.266587c3.js"><link rel="prefetch" href="/assets/js/9.a7d1a842.js"><link rel="prefetch" href="/assets/js/90.b60fa353.js"><link rel="prefetch" href="/assets/js/91.f6943263.js"><link rel="prefetch" href="/assets/js/92.585b717d.js"><link rel="prefetch" href="/assets/js/93.53b4c14e.js"><link rel="prefetch" href="/assets/js/94.bb6cfe90.js"><link rel="prefetch" href="/assets/js/95.f264011c.js"><link rel="prefetch" href="/assets/js/96.65762376.js"><link rel="prefetch" href="/assets/js/97.b571959d.js"><link rel="prefetch" href="/assets/js/99.459775c6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a4ed3cf5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">原创</a></div><div class="nav-item"><a href="/translate/" class="nav-link">翻译</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试题</a></div><div class="nav-item"><a href="/book/" class="nav-link">阅读</a></div><div class="nav-item"><a href="https://mengsixing.github.io/front-end-navigation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/mengsixing/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">原创</a></div><div class="nav-item"><a href="/translate/" class="nav-link">翻译</a></div><div class="nav-item"><a href="/interview/" class="nav-link">面试题</a></div><div class="nav-item"><a href="/book/" class="nav-link">阅读</a></div><div class="nav-item"><a href="https://mengsixing.github.io/front-end-navigation" target="_blank" rel="noopener noreferrer" class="nav-link external">
  前端导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/mengsixing/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0" style="padding-top:;"><!----> <p class="sidebar-heading"><span>DevOps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/devops-microfrontend.html" class="sidebar-link">微前端自检清单</a></li><li><a href="/blog/devops-kubernetes.html" class="sidebar-link">Kubernetes 使用总结</a></li><li><a href="/blog/devops-docker.html" class="sidebar-link">Docker 使用总结</a></li><li><a href="/blog/devops-git.html" class="sidebar-link">Git 常用知识总结</a></li><li><a href="/blog/devops-dependencies.html" class="sidebar-link">Package.json 依赖管理</a></li><li><a href="/blog/devops-image.html" class="sidebar-link">合理选择图片格式</a></li><li><a href="/blog/devops-performance.html" class="sidebar-link">前端性能优化</a></li><li><a href="/blog/devops-commitlint.html" class="sidebar-link">Commitlint 使用总结</a></li><li><a href="/blog/devops-cli-diy.html" class="sidebar-link">实现一个自己的 CLI</a></li><li><a href="/blog/devops-test.html" class="sidebar-link">前端测试</a></li><li><a href="/blog/devops-webpack-entry.html" class="sidebar-link">Webpack 系列（三）整体流程分析</a></li><li><a href="/blog/devops-webpack-flow.html" class="sidebar-link">Webpack 系列（二）手写模块打包代码</a></li><li><a href="/blog/devops-webpack.html" class="sidebar-link">Webpack 系列（一）使用总结</a></li><li><a href="/blog/devops-cdfang-spider.html" class="sidebar-link">实战：手搭一个 React，Typescript，Koa，GraphQL 环境</a></li></ul></section></li><li><section class="sidebar-group depth-0" style="padding-top:;"><!----> <p class="sidebar-heading"><span>Framework</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/library-node.html" class="sidebar-link">Node.js 使用总结</a></li><li><a href="/blog/library-react.html" class="sidebar-link">React 使用总结</a></li><li><a href="/blog/libary-react-core.html" class="sidebar-link">React 核心知识</a></li><li><a href="/blog/library-react-code-1.html" class="sidebar-link">React 源码解析（一）JSX 转换</a></li><li><a href="/blog/library-react-code-2.html" class="sidebar-link">React 源码解析（二）FiberRoot 构建</a></li><li><a href="/blog/library-react-code-3.html" class="sidebar-link">React 源码解析（三）Fiber 的调度过程</a></li><li><a href="/blog/library-react-code-4.html" class="sidebar-link">React 源码解析（四）深入理解 fiber 更新过程</a></li><li><a href="/blog/library-react-ssr.html" class="sidebar-link">React 服务器端渲染</a></li><li><a href="/blog/library-react-hooks.html" class="sidebar-link">使用 React Hooks 节省 90% 的代码</a></li><li><a href="/blog/library-vue.html" class="sidebar-link">Vue 使用总结</a></li><li><a href="/blog/library-vue-flow.html" class="sidebar-link">图解 Vue 响应式原理</a></li><li><a href="/blog/library-vue-nexttick.html" class="sidebar-link">图解 Vue 异步更新</a></li><li><a href="/blog/library-miniProgram.html" class="sidebar-link">小程序使用总结</a></li><li><a href="/blog/library-redux.html" class="sidebar-link">Redux 使用总结</a></li><li><a href="/blog/library-react-redux-code.html" class="sidebar-link">React Hooks 替代 React-Redux</a></li><li><a href="/blog/library-rxjs.html" class="sidebar-link">RxJS 基础知识总结</a></li><li><a href="/blog/library-koa.html" class="sidebar-link">Koa 源码阅读</a></li><li><a href="/blog/library-koa-diy.html" class="sidebar-link">深入 Koa 原理</a></li></ul></section></li><li><section class="sidebar-group depth-0" style="padding-top:;"><!----> <p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/css-icon.html" class="sidebar-link">网站图标开发指南</a></li><li><a href="/blog/css.html" class="sidebar-link">CSS 使用总结</a></li><li><a href="/blog/css-modules.html" class="sidebar-link">CSS 模块化</a></li><li><a href="/blog/css-next.html" class="sidebar-link">CSS NEXT 语法</a></li><li><a href="/blog/css-ifc.html" class="sidebar-link">CSS IFC 总结</a></li><li><a href="/blog/css-flex.html" class="sidebar-link">CSS Flex 布局总结</a></li><li><a href="/blog/css-useful.html" class="sidebar-link">CSS 有趣的特性</a></li><li><a href="/blog/css-devicePixelRatio.html" class="sidebar-link">CSS 设备像素比</a></li><li><a href="/blog/css-houdini-star.html" class="sidebar-link">CSS Houdini 画一片星空</a></li></ul></section></li><li><section class="sidebar-group depth-0" style="padding-top:10px;"><div class="kitty-main" data-v-495a5465><span class="stand" data-v-495a5465></span> <div class="cat" data-v-495a5465><div class="body" data-v-495a5465></div> <div class="head" data-v-495a5465><div class="ear" data-v-495a5465></div> <div class="ear" data-v-495a5465></div></div> <div class="face" data-v-495a5465><div class="nose" data-v-495a5465></div> <div class="whisker-container" data-v-495a5465><div class="whisker" data-v-495a5465></div> <div class="whisker" data-v-495a5465></div></div> <div class="whisker-container" data-v-495a5465><div class="whisker" data-v-495a5465></div> <div class="whisker" data-v-495a5465></div></div></div> <div class="tail-container" data-v-495a5465><div class="tail" data-v-495a5465><div class="tail" data-v-495a5465><div class="tail" data-v-495a5465><div class="tail" data-v-495a5465><div class="tail" data-v-495a5465><div class="tail" data-v-495a5465><div class="tail" data-v-495a5465></div></div></div></div></div></div></div></div></div></div> <p class="sidebar-heading open"><span>网络协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/osi-flow.html" class="sidebar-link">一文串联 HTTP、TCP、IP、以太网</a></li><li><a href="/blog/osi-http.html" class="sidebar-link">一文串联 HTTP / [0.9 | 1.0 | 1.1 | 2 | 3]</a></li><li><a href="/blog/osi-https.html" class="sidebar-link">HTTPS 协议总结</a></li><li><a href="/blog/osi-tcp.html" class="sidebar-link">TCP 协议总结</a></li><li><a href="/blog/osi-web-security.html" aria-current="page" class="active sidebar-link">一文读懂 Web 安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/osi-web-security.html#安全世界观" class="sidebar-link">安全世界观</a></li><li class="sidebar-sub-header"><a href="/blog/osi-web-security.html#安全攻防案例" class="sidebar-link">安全攻防案例</a></li><li class="sidebar-sub-header"><a href="/blog/osi-web-security.html#总结与思考" class="sidebar-link">总结与思考</a></li></ul></li><li><a href="/blog/osi-web-login.html" class="sidebar-link">前端登录，这一篇就够了</a></li><li><a href="/blog/osi-hijack.html" class="sidebar-link">流量劫持</a></li></ul></section></li><li><section class="sidebar-group depth-0" style="padding-top:;"><!----> <p class="sidebar-heading"><span>运维相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/operation-docker-micro-service.html" class="sidebar-link">Docker 部署简单的 Web 服务</a></li><li><a href="/blog/operation-linux.html" class="sidebar-link">Linux 快捷键</a></li><li><a href="/blog/operation-linux-login.html" class="sidebar-link">Linux 免密登录配置</a></li><li><a href="/blog/operation-linux-file.html" class="sidebar-link">Linux 替换文件内容命令</a></li><li><a href="/blog/operation-nginx-match.html" class="sidebar-link">Nginx Location 匹配规则</a></li><li><a href="/blog/operation-nginx-load-balancing.html" class="sidebar-link">Nginx 负载均衡配置</a></li></ul></section></li><li><section class="sidebar-group depth-0" style="padding-top:;"><!----> <p class="sidebar-heading"><span>JS 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js-prototype.html" class="sidebar-link">快速读懂 JS 原型链</a></li><li><a href="/blog/js-principle.html" class="sidebar-link">JS 编译器，解释引擎</a></li><li><a href="/blog/js-promise.html" class="sidebar-link">JS 理解 Promise</a></li><li><a href="/blog/js-this.html" class="sidebar-link">JS 理解 This</a></li><li><a href="/blog/js-canvas.html" class="sidebar-link">两行代码实现图片碎片化加载</a></li><li><a href="/blog/js-operator-priority.html" class="sidebar-link">JS 运算符优先级</a></li><li><a href="/blog/js-jsBridge.html" class="sidebar-link">JS Bridge 总结</a></li><li><a href="/blog/js-module.html" class="sidebar-link">JS 模块化</a></li><li><a href="/blog/js-inherit.html" class="sidebar-link">JS 实现继承</a></li><li><a href="/blog/js-event.html" class="sidebar-link">JS 事件</a></li><li><a href="/blog/js-form.html" class="sidebar-link">JS 表单基础知识</a></li><li><a href="/blog/js-html5-program.html" class="sidebar-link">JS PostMessage &amp; 拖放 API</a></li><li><a href="/blog/js-recursion.html" class="sidebar-link">JS 函数尾递归优化</a></li><li><a href="/blog/js-object-ergodic.html" class="sidebar-link">JS 对象属性的遍历</a></li></ul></section></li><li><section class="sidebar-group depth-0" style="padding-top:;"><!----> <p class="sidebar-heading"><span>编程基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/base-function-monad.html" class="sidebar-link">学习函数式编程 Monad</a></li><li><a href="/blog/base-function.html" class="sidebar-link">轻松实战函数式编程</a></li><li><a href="/blog/base-typescript.html" class="sidebar-link">Typescript 使用总结</a></li><li><a href="/blog/base-graphql.html" class="sidebar-link">GraphQL 使用总结</a></li><li><a href="/blog/base-ioc.html" class="sidebar-link">你需要知道的依赖注入</a></li><li><a href="/blog/base-functional.html" class="sidebar-link">函数式编程</a></li><li><a href="/blog/base-webcomponents.html" class="sidebar-link">Web Component 基础</a></li><li><a href="/blog/base-structure.html" class="sidebar-link">数据结构与算法</a></li><li><a href="/blog/base-structure-base-select.html" class="sidebar-link">查找算法</a></li><li><a href="/blog/base-structure-base-sort.html" class="sidebar-link">基本排序算法</a></li><li><a href="/blog/base-structure-high-algorithm.html" class="sidebar-link">高级算法</a></li><li><a href="/blog/base-structure-senior-sort.html" class="sidebar-link">高级排序算法</a></li><li><a href="/blog/base-design-pattern.html" class="sidebar-link">设计模式</a></li><li><a href="/blog/base-computer.html" class="sidebar-link">计算机组成原理</a></li><li><a href="/blog/base-technology.html" class="sidebar-link">专业术语</a></li></ul></section></li><li><section class="sidebar-group depth-0" style="padding-top:;"><!----> <p class="sidebar-heading"><span>总结思考</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/2020-6.html" class="sidebar-link">我的 2020 总结（上）</a></li><li><a href="/blog/2019-12.html" class="sidebar-link">我的 2019 总结（下）</a></li><li><a href="/blog/2019-6.html" class="sidebar-link">我的 2019 总结（上）</a></li><li><a href="/blog/2018.html" class="sidebar-link">我的 2018 总结</a></li><li><a href="/blog/frontend.html" class="sidebar-link">我的前端知识清单</a></li></ul></section></li><li><section class="sidebar-group depth-0" style="padding-top:;"><!----> <p class="sidebar-heading"><span>其它</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/other-pit.html" class="sidebar-link">记录遇到的坑</a></li><li><a href="/blog/other-tools.html" class="sidebar-link">常用工具整理</a></li><li><a href="/blog/other-vscode.html" class="sidebar-link">VSCode 常用快捷键</a></li><li><a href="/blog/other-npm.html" class="sidebar-link">实用的 npm 包</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="一文读懂-web-安全"><a href="#一文读懂-web-安全" class="header-anchor">#</a> 一文读懂 Web 安全</h1> <p>Web 安全是互联网中不可或缺的一个领域，这个领域中诞生了大量的黑帽子与白帽子，他们都是安全领域的王者，在平时里，他们利用各种巧妙的技术互相博弈，时不时就会掀起一场 Web 安全浪潮，真可谓神仙打架，各显神通。</p> <p>本文从一个吃瓜群众的角度，聊一聊 Web 安全的一些有趣故事。</p> <ul><li>安全世界观</li> <li>安全攻防案例</li> <li>总结与思考</li></ul> <h2 id="安全世界观"><a href="#安全世界观" class="header-anchor">#</a> 安全世界观</h2> <p>在互联网发展之初，IE 浏览器垄断的时期，大家上网的目的都很单纯，主要通过浏览器分享信息，获取新闻。但随着互联网的不断发展发展，一个网页能做的事情越来越多，除了看新闻，我们还可以看视频、玩游戏、购物、聊天等，这些功能都大大丰富了我们的生活。</p> <p>随着网页功能的逐渐增多，就开始出现了一些黑帽子，他们试图通过一些技术手段来牟取利益。在我小的时候，印象最深的就是木马病毒，它可以监控你的键盘，将你在键盘上敲打的内容发送到黑客的机器上，黑客通过分析这些内容，很容易就能得到你的游戏账号和密码。</p> <p>在这之后，就诞生出了一些杀毒软件，致力于解决网络上的各种病毒，随着不断地发展，杀毒软件已经成为一台电脑必不可少的软件。</p> <blockquote><p>为什么会出现这样的安全问题？</p> <p><strong>安全归根到底是信任的问题</strong>，如果所有人都按照正常的流程去上网，不去谋取私利，也就没有安全问题可谈了。</p></blockquote> <p>安全的根本在于信任，但要让所有人互相信任谈何容易。在当前阶段，我们可以做到：持续做好安全防护，让漏洞越来越少，非法攻击越来越困难，这样就能逐渐减少黑帽子的数量，让病毒制造者越来越少。</p> <h3 id="如何做好安全"><a href="#如何做好安全" class="header-anchor">#</a> 如何做好安全</h3> <p>要做好安全，首先得理解安全问题的属性，前人通过无数实践，最后将安全的属性总结为安全三要素，分别为：机密性、完整性、可用性。</p> <ul><li>机密性
<ul><li>保护数据内容不被泄露。</li> <li>通常使用加密的方法。</li></ul></li> <li>完整性
<ul><li>保护数据内容是完整的、没有被篡改。</li> <li>通常使用数字签名的方法。</li></ul></li> <li>可用性
<ul><li>数据随时都能够使用。</li> <li>通常是在防御 DOS。</li></ul></li></ul> <p>有了安全 3 要素之后，我们就可以对安全问题进行评估了。</p> <ul><li>资产等级划分
<ul><li>找出最重要的数据。</li> <li>找出最重要数据的宿主空间，如：在数据库里，那么数据库就得重点防御。</li> <li>找出数据库的宿主空间，如：在一台服务器上，那么这台服务器就得做次等防御。</li> <li>找出服务器的宿主空间，如：在 OSI 网络层级上，那么在网络层面就得做一般防御。</li></ul></li> <li>威胁分析
<ul><li>找出威胁（可能造成危害的来源）。</li> <li>找出风险（可能出现的损失叫做风险）。</li></ul></li> <li>风险分析
<ul><li>采取多标准决策分析，即：风险 = 威胁等级 * 威胁可行性。</li> <li>计算所有的威胁，将最终的风险进行排序，优先解决风险大的问题。</li></ul></li> <li>确认解决方案
<ul><li>找出不安全的实现方式，并确定解决方案。</li> <li>解决方案不要改变商业需求的初衷。</li> <li>解决方案需对用户透明，不要改变用户的习惯。</li></ul></li></ul> <p>做好安全评估之后，我们就有了一份安全解决方案，后续的安全工作只需按照这个方案去做，就没有任何问题。</p> <h3 id="安全的原则"><a href="#安全的原则" class="header-anchor">#</a> 安全的原则</h3> <p>有了安全解决方案之后，我们还可以制定一些安全原则，遵守原则做事，可以让我们事半功倍。</p> <ul><li>黑名单、白名单原则
<ul><li>白名单方案指的是给安全的资源授权。</li> <li>黑名单方案指的是禁用不安全的资源。</li> <li>我们应该优先使用白名单方案，因为黑名单通常统计不完所有的不安全资源。</li> <li>如：XSS 攻击的方式非常多，可以通过 script、css、image 标签等，尽管你将这些标签都加入黑名单，也不能保证其他的标签都没有 XSS 的攻击隐患。</li></ul></li> <li>最小权限原则
<ul><li>只授予必要的权限，不要过度授权，减少出错机会。</li> <li>如：普通权限的 Linux 用户只能操作 <code>~</code> 文件夹下的目录，如果有人想删库跑路，在执行 <code>rm -rf /</code> 时，就会提示无权限。</li></ul></li> <li>纵深防御原则
<ul><li>这条原则类似 <code>木桶理论</code>，安全水平往往取决于最短的那块板。</li> <li>即：不要留下短板，黑帽子们往往可以利用短板为突破口，挖掘更大的漏洞。</li></ul></li> <li>数据与代码分离原则
<ul><li>当用户数据被当成代码执行时，混淆了数据和代码的边界，从而导致安全问题。</li> <li>如：XSS 就是利用这一点去攻击的。</li></ul></li> <li>不可预测性原则
<ul><li>这条原则是为了提高攻击门槛，有效防止基于篡改、伪造的攻击。</li> <li>如：数据库中使用 uuid 代替 number 型的自增主键，可以避免 id 被攻击者猜到，从而进行批量操作。</li> <li>token 也是利用不可预测性，攻击者无法构造 token 也就无法进行攻击。</li></ul></li></ul> <p>有了这些安全原则，我们就可以开干了，接下来介绍几个常见的攻防案例。</p> <h2 id="安全攻防案例"><a href="#安全攻防案例" class="header-anchor">#</a> 安全攻防案例</h2> <p>安全攻防的案例非常多，这里主要介绍几个出镜率比较高的安全问题。</p> <h3 id="客户端攻击"><a href="#客户端攻击" class="header-anchor">#</a> 客户端攻击</h3> <ul><li>XSS 攻击</li> <li>CSRF 攻击</li> <li>点击劫持</li></ul> <h4 id="xss-攻击"><a href="#xss-攻击" class="header-anchor">#</a> XSS 攻击</h4> <p>XSS 攻击的本质是将用户数据当成了 HTML 代码一部分来执行，从而混淆原本的语义，产生新的语义。</p> <p><img src="https://cdn.yinhengli.com/image-20200726164324964.png" alt=""></p> <p>如图所示，我们注册了一个 <code>&lt;script&gt;alert(document.cookie)&lt;/script&gt;</code> 的用户名，所有能看到此用户名字的页面，都会弹出当前浏览器的 Cookie，如果代码的逻辑是将 Cookie 发送到攻击者的网站，攻击者就能冒充当前用户进行登录了。</p> <p>XSS 攻击方式有很多，所有和用户交互的地方，都有可能存在 XSS 攻击。</p> <p>例如：</p> <ul><li>所有 input 框。</li> <li>window.location。</li> <li>window.name。</li> <li>document.referrer。</li> <li>document.cookie。</li> <li>localstorage。</li> <li>...</li></ul> <p>由于页面中与用户交互的地方非常多，肯定还有一些 XSS 的攻击方式没有被发现，而一旦被黑帽子发现，就可能造成严重的影响，所以我们务必引起重视。</p> <h5 id="xss-攻击影响"><a href="#xss-攻击影响" class="header-anchor">#</a> XSS 攻击影响</h5> <p>被 XSS 攻击成功后，攻击者就可以获取大量的用户信息，例如：</p> <ul><li>识别用户 UA。</li> <li>识别用户浏览器扩展。</li> <li>识别用户浏览过的网站。
<ul><li>通过 CSS 的 Visited 属性。</li></ul></li> <li>获取用户真实的 IP。
<ul><li>通过 WebRTC 等。</li></ul></li> <li>盗取 Cookie
<ul><li>伪造用户登录，窃取用户资料。</li></ul></li> <li>XSS 钓鱼。
<ul><li>向页面注入一个登录弹窗，让用户认为是网站内的登录弹窗（其实是钓鱼网站的），一旦用户登录，账号密码就泄露给了钓鱼网站。</li></ul></li></ul> <h5 id="xss-攻击防御"><a href="#xss-攻击防御" class="header-anchor">#</a> XSS 攻击防御</h5> <p>目前来说，XSS 已经得到了互联网行业的重视，许多开发框架都内置了安全的 HTML 渲染方法。</p> <p>我们也可以自定义进行一些安全配置。</p> <ul><li>配置 HTTP 中的 http-only 头，让前端 JS 不能操作 Cookie。</li> <li>输入检查，在用户提交数据时，使用 XssFilter 过滤掉不安全的数据。</li> <li>输出检查，在页面渲染的时候，过滤掉危险的数据。</li></ul> <h4 id="csrf-攻击"><a href="#csrf-攻击" class="header-anchor">#</a> CSRF 攻击</h4> <p>CSRF（Cross-site request forgery）跨站请求伪造，是一种利用用户身份，执行一些用户非本意的操作。</p> <p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1595764461065&amp;di=52af20dbe637a55ada2bf2770f647109&amp;imgtype=0&amp;src=http%3A%2F%2Fimg.kanzhun.com%2Fimages%2Fseo%2Fmianshiti%2F20191125%2F2d9456cb9057a1973c48f333e884f8fa.png" alt=""></p> <p>如图所示：</p> <ol><li>用户先登录了服务器 B，然后去访问服务器 C。</li> <li>服务器 C 通过恶意脚本，冒充 A 去调用服务器 B 上的某个功能，</li> <li>对于服务器 B 来说，还以为这是 A 发起的请求，就当作正常请求处理了。</li></ol> <p>试想一下，如果 C 冒充 A 进行了一次转账，必定会造成大量的经济损失。</p> <h5 id="csrf-防御方式"><a href="#csrf-防御方式" class="header-anchor">#</a> CSRF 防御方式</h5> <p>防御 CSRF 主要有以下几种方式：</p> <ul><li>验证码
<ul><li>每一次请求都要求用户验证，以确保请求真实可靠。</li> <li>即：利用恶意脚本不能识别复杂的验证码的特点，保证每次请求都是合法的。</li></ul></li> <li>Referer 检查
<ul><li>检查发起请求的服务器，是否为目标服务器。</li> <li>即：HTTP 请求中的 Referer 头传递了当前请求的域名，如果此域名是非法服务器的域名，则需要禁止访问。</li></ul></li> <li>Token
<ul><li>利用不可预测性原则，每一请求必须带上一段随机码，这段随机码由正常用户保存，黑帽子不知道随机码，也就无法冒充用户进行请求了。</li></ul></li></ul> <h4 id="点击劫持"><a href="#点击劫持" class="header-anchor">#</a> 点击劫持</h4> <p>点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，在页面中透出一个按钮诱导用户点击。</p> <p>就像一张图片上面铺了一层透明的纸一样，你看到的是攻击者的页面，但是其实这个页面只是在底部，而你真正点击的是被攻击者透明化的另一个网页。</p> <p><img src="https://img-blog.csdn.net/20180319164653726" alt=""></p> <p>如果所示，当你点击了页面上的按钮之后，本以为会。。。而真正执行的操作是关注了某人的博客。</p> <h5 id="点击劫持防御"><a href="#点击劫持防御" class="header-anchor">#</a> 点击劫持防御</h5> <p>由于点击劫持主要通过 iframe，所以在防御时，主要基于 iframe 去做。</p> <ul><li><p>方案一：frame busting</p> <ul><li>正常网站使用 JS 脚本判断是否被恶意网站嵌入，如：博客网站监测到被一个 iframe 打开，自动跳转到正常的页面即可。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>self <span class="token operator">!==</span> top<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 跳回原页面</span>
  top<span class="token punctuation">.</span>location <span class="token operator">=</span> self<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>方案二：使用 HTTP 中的 x-frame-options 头，控制 iframe 的加载，它有 3 个值可选：</p> <ul><li>DENY，表示页面不允许通过 iframe 的方式展示。</li> <li>SAMEORIGIN，表示页面可以在相同域名下通过 iframe 的方式展示。</li> <li>ALLOW-FROM，表示页面可以在指定来源的 iframe 中展示。</li></ul></li> <li><p>配置 iframe 的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/iframe" target="_blank" rel="noopener noreferrer">sandbox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 属性</p> <ul><li>sandbox = &quot;allow-same-origin&quot; 则只能加载与主站同域的资源。</li></ul></li></ul> <h3 id="服务器端攻击"><a href="#服务器端攻击" class="header-anchor">#</a> 服务器端攻击</h3> <p>服务器端的攻击的方式也非常多，这里列举几个常见的。</p> <ul><li>SQL 注入攻击</li> <li>文件上传漏洞</li> <li>登录认证攻击</li> <li>应用层拒绝服务攻击</li> <li>webServer 配置安全</li></ul> <h4 id="sql-注入攻击"><a href="#sql-注入攻击" class="header-anchor">#</a> SQL 注入攻击</h4> <p>SQL 注入和 XSS 一样，都是违背了数据和代码分离原则导致的攻击方式。</p> <p>如图所示，我们利用 SQL 注入，就能在不需要密码的情况下，直接登录管理员的账号。</p> <p><img src="https://cdn.yinhengli.com/image-20200726174642846.png" alt=""></p> <p>攻击的前提是：后端只用了简单的拼接 SQL 的方式去查询数据。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 拼接出来的 sql 如下：</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> username <span class="token operator">=</span> <span class="token string">'admin'</span> <span class="token operator">or</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> password <span class="token operator">=</span> <span class="token string">'xxx'</span>
<span class="token comment"># 无论密码输入什么，这条 sql 语句都能查询到管理员的信息</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>除此之外，SQL 注入还有以下几种方式：</p> <ul><li>使用 SQL 探测，猜数据库表名，列名。
<ul><li>通过 MySQL 内置的 benchmark 探测数据库字段。</li> <li>如：一段伪代码 <code>select database as current if current[0]==='a',benchmark（10000,'猜对了'）</code> 如果表明猜对了，就延迟 10 s 并返回成功。</li></ul></li> <li>使用存储过程执行系统命令
<ul><li>通过内置的方法或存储过程执行 shell 脚本。</li> <li>如：xp_cmdshell、sys_eval、sys_exec 等。</li></ul></li> <li>字符串截断
<ul><li>如：MySQL 在处理超长的字符串时，会显示警告，但会执行成功。</li> <li>注册一个 admin + 50 个空格的用户，会触发截断，最终新增一个 admin 用户，这样就能拥有管理员权限了。</li></ul></li></ul> <h5 id="sql-注入防御"><a href="#sql-注入防御" class="header-anchor">#</a> SQL 注入防御</h5> <p>防止 SQL 注入的最好的办法就是，不要手动拼接 SQL 语句。</p> <ul><li>最佳方案，使用预编译语句绑定变量
<ul><li>通常是指框架提供的拼接 SQL 变量的方法。</li> <li>这样的语义不会发生改变，变量始终被当成变量。</li></ul></li> <li>严格限制数据类型，如果注入了其他类型的数据，直接报错，不允许执行。</li> <li>使用安全的存储过程和系统函数。</li></ul> <h5 id="crlf-注入"><a href="#crlf-注入" class="header-anchor">#</a> CRLF 注入</h5> <p>在注入攻击中，换行符注入也是非常常见的一种攻击方式。</p> <ul><li>如果在 HTTP 请求头中注入 2 个换行符，会导致换行符后面的所有内容都被解析成请求实体部分。</li> <li>攻击者通常在 Set-Cookie 时，注入换行符，控制请求传递的内容。</li></ul> <h4 id="文件上传漏洞"><a href="#文件上传漏洞" class="header-anchor">#</a> 文件上传漏洞</h4> <p>上传文件是网页开发中的一个常见功能，如果不加处理，很容易就会造成攻击。</p> <p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1595775753027&amp;di=e2d6d0ae1470ade11e3471198502e87c&amp;imgtype=0&amp;src=http%3A%2F%2Fgz.web.tedu.cn%2Fupload%2F20151104%2F20151104095236_303.jpg" alt=""></p> <p>如图所示，攻击者上传了一个木马文件，并且通过返回的 URL 进行访问，就能控制服务器。</p> <p>通常我们会控制上传文件的后缀名，但也不能完全解决问题，攻击者还可以通过以下方式进行攻击：</p> <ul><li>伪造正常文件
<ul><li>将木马文件伪装成正常的后缀名进行上传。</li> <li>如果要避免这个问题，我们可以继续判断上传文件的文件头前 10 个字节。</li></ul></li> <li>Apache 解析方式是从后往前解析，直到找到一个认识的后缀名为止
<ul><li>如：上传一个 <code>abc.php.rar.rar.rar</code> 能绕过后缀名检查，但在执行时，被当成一个 php 文件进行执行。</li></ul></li> <li>IIS 会截断分号进行解析
<ul><li>如：<code>abc.asp;xx.png</code> 能绕过后缀名检查，但在执行时，被当成一个 asp 文件进行执行。</li></ul></li> <li>HTTP PUT 方法允许将文件上传到指定位置
<ul><li>通过 HTTP MOVE 方法，还能修改上传的文件名。</li> <li>通过二者配合，就能先上传一个正常的后缀名，然后改为一个恶意的后缀名。</li></ul></li> <li>PHP CGI 路径问题
<ul><li>执行 <code>http://abc.com/test.png/xxx.php</code> 时，会把 test.png 当做 php 文件去解析。</li> <li>如果用户正好是把一段恶意的 php 脚本当做一张图片进行上传，就会触发这个攻击。</li></ul></li></ul> <h5 id="文件上传漏洞防御"><a href="#文件上传漏洞防御" class="header-anchor">#</a> 文件上传漏洞防御</h5> <p>防御文件上传漏洞，可以从以下几点考虑：</p> <ul><li>将文件上传的目录设置为不可执行。</li> <li>判断文件类型
<ul><li>检查 MIME Type，配置白名单。</li> <li>检查后缀名，配置白名单。</li></ul></li> <li>使用随机数改写文件名和文件路径
<ul><li>上传文件后，随机修改文件名，让攻击者无法执行攻击。</li></ul></li> <li>单独设置文件服务器的域名
<ul><li>单独做一个文件服务器，并使用单独的域名，利用同源策略，规避客户端攻击。</li> <li>通常做法是将静态资源存放在 CDN 上。</li></ul></li></ul> <h4 id="登录认证攻击"><a href="#登录认证攻击" class="header-anchor">#</a> 登录认证攻击</h4> <p>登录认证攻击可以理解为一种破解登录的方法。攻击者通常采用以下几种方式进行破解：</p> <ul><li>彩虹表
<ul><li>攻击者通过搜集大量明文和 MD5 的对应关系，用于破解 MD5 密文找出原文。</li> <li>对于彩虹表中的 MD5 密码，我们可以加盐，进行二次加密，避免被破解。</li></ul></li> <li>Session Fixation 攻击
<ul><li>利用应用系统在服务器的 SessionID 固定不变机制，借助他人用相同的 SessionID 获取认证和授权。</li> <li>攻击者登录失败后，后端返回了 SessionID，攻击者将 SessionID 交给正常用户去登录，登录成功后，攻击者就能使用这个 SessionID 冒充正常用户登录了。</li> <li>如果浏览器每一次登录都刷新 SessionID 可以避免这个问题。</li></ul></li> <li>Session 保持攻击
<ul><li>有些时候，后端出于用户体验考虑，只要这个用户还活着，就不会让这个用户的 Session 失效。</li> <li>攻击者可以通过不停发起请求，可以让这个 Session 一直活下去。</li></ul></li></ul> <h5 id="登录认证防御方式"><a href="#登录认证防御方式" class="header-anchor">#</a> 登录认证防御方式</h5> <ul><li>多因素认证
<ul><li>密码作为第一道防御，但在密码验证成功后，我们还可以继续验证：动态口令，数字证书，短信验证码等，以保证用户安全。</li> <li>由于短信和网页完全是 2 套独立的系统，攻击者很难获取到短信验证码，也就无法进行攻击。</li></ul></li></ul> <p>除此之外，前端登录认证还有多种方式，如果你对此感兴趣，可以参考我之前写的《前端登录，这一篇就够了》。</p> <h4 id="应用层拒绝服务攻击"><a href="#应用层拒绝服务攻击" class="header-anchor">#</a> 应用层拒绝服务攻击</h4> <p>应用层拒绝服务攻击，又叫 DDOS 攻击，它指的是利用大量的请求造成资源过载，导致服务器不可用。</p> <p><img src="https://www.cloudflare.com/img/learning/ddos/http-flood-ddos-attack/http-flood-attack.png" alt=""></p> <p>通常有以下几种 DDOS 攻击方式：</p> <ul><li>SYN Flood 洪水攻击
<ul><li>利用 HTTP 3 次握手机制，消耗服务器连接资源。</li> <li>如：攻击者发起大量的 HTTP 请求，但并不完成 3 次握手，而是只握手 2 次，这时服务器端会继续等待直至超时。这时的服务器会一直忙于处理大量的垃圾请求，而无暇顾及正常请求。</li></ul></li> <li>Slowloris 攻击
<ul><li>以非常低的速度发送 HTTP 请求头，消耗服务器连接资源。</li> <li>如：攻击者发送大量 HTTP 请求，但每个请求头都发的很慢，每隔 10s 发送一个字符，服务器为了等待数据，不得始终保持连接，这样一来，服务器连接数很快就被占光了。</li></ul></li> <li>HTTP POST DOS
<ul><li>发送 HTTP 时，指定一个非常大的 Content-Length 然后以很长的间隔发送，消耗服务器连接资源。</li></ul></li> <li>CC 攻击
<ul><li>针对一些非常消耗资源的页面，不断发起请求。</li> <li>如：页面中的某些页面，需要后端做大量的运算，或者需要做非常耗时的数据库查询。在大量的请求下，服务器的 CPU、内存等资源可能就被占光了。</li></ul></li> <li>Server Limit DOS
<ul><li>通过 XSS 注入一段超长的 Cookie，导致超出 Web 服务器所能承受的 Request Header 长度，服务器端就会拒绝此服务。</li></ul></li> <li>ReDOS
<ul><li>针对一些缺陷的正则表达式，发起大量请求，耗光系统资源。</li></ul></li></ul> <h5 id="应用层拒绝服务攻击防御"><a href="#应用层拒绝服务攻击防御" class="header-anchor">#</a> 应用层拒绝服务攻击防御</h5> <p>对于应用层拒绝服务攻击，目前也没有特别完美的解决方案，不过我们还是可以进行一些优化。</p> <ul><li>应用代码做好性能优化
<ul><li>合理使用 Redis、Memcache 等缓存方案，减少 CPU 资源使用率。</li></ul></li> <li>网络架构上做好优化
<ul><li>后端搭建负载均衡。</li> <li>静态资源使用 CDN 进行管理。</li></ul></li> <li>限制请求频率
<ul><li>服务器计算所有 IP 地址的请求频率，筛选出异常的 IP 进行禁用。</li> <li>可以使用 LRU 算法，缓存前 1000 条请求的 IP，如果有 IP 请求频率过高，就进行禁用。</li></ul></li></ul> <p>其实，处理 DDOS 核心思路就是禁用不可信任的用户，确保资源都是被正常的用户所使用。</p> <h4 id="webserver-配置安全"><a href="#webserver-配置安全" class="header-anchor">#</a> WebServer 配置安全</h4> <p>我们在部署 web 应用的时候，经常会用到 Nginx、Apache、IIS、Tomcat、Jboss 等 Web 服务器，这些服务器本身也存在一些安全隐患，如果配置不当，很容易收到攻击。</p> <p>在配置 Web 服务器时，可以参考以下几点：</p> <ul><li>以用户权限运行 Web 服务器
<ul><li>遵守最小权限原则，以最小权限身份运行 Web 服务器，限制被入侵后的权限。</li></ul></li> <li>删除可视化后台
<ul><li>运行 Tomcat、Jboss 等 Web 服务器时，默认会开启一个可视化的运营后台，运行在 8080 端口，并且第一次访问是没有认证的。</li> <li>攻击者可以利用可视化后台，远程加载一段 war 包或者上传木马文件，进行控制。</li></ul></li> <li>及时更新版本
<ul><li>主流的 Web 服务器，每隔一段时间就会修复一些漏洞，所以记得及时更新版本。</li></ul></li></ul> <h2 id="总结与思考"><a href="#总结与思考" class="header-anchor">#</a> 总结与思考</h2> <p>本文介绍了 Web 安全的基本概念，以及大量的攻防技巧，其实这只是 Web 安全中的冰山一角，如果你对此感兴趣，不妨在安全领域继续深耕学习，一定能看到更广阔一片天。</p> <p>对于一个开发者来说，我们应该在写代码时就将安全考虑其中，形成自己的一套安全开发体系，做到心中有安全，时时考虑安全，就能无形之中化解不法分子的攻击。</p> <p>最后，如果你对此有任何想法，欢迎留言评论！</p> <p><img src="https://cdn.yinhengli.com/shequ-fenxiang.png" alt=""></p></div> <!----> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/mengsixing/blog/edit/master/docs/blog/osi-web-security.md" target="_blank" rel="noopener noreferrer">本文源码地址</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">更新时间: </span> <span class="time">2/25/2021, 12:52:23 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/osi-tcp.html" class="prev">
          TCP 协议总结
        </a></span> <span class="next"><a href="/blog/osi-web-login.html">
          前端登录，这一篇就够了
        </a>
        →
      </span></p></div>  <div class="gitalk-container theme-default-content"><div id="gitalk-container" class="content"></div></div></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.f52a01de.js" defer></script><script src="/assets/js/2.aee12845.js" defer></script><script src="/assets/js/98.b9969f81.js" defer></script><script src="/assets/js/4.dbd505c3.js" defer></script>
  </body>
</html>
