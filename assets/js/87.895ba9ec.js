(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{334:function(s,a,n){"use strict";n.r(a);var t=n(19),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"linux-免密登录配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#linux-免密登录配置"}},[s._v("#")]),s._v(" Linux 免密登录配置")]),s._v(" "),n("p",[s._v("这一节来实战一个免密登录，配置好之后，直接通过 "),n("code",[s._v("ssh + 服务器名")]),s._v("就能连接到远程计算机。")]),s._v(" "),n("ul",[n("li",[s._v("基本配置")]),s._v(" "),n("li",[s._v("进阶配置")])]),s._v(" "),n("h2",{attrs:{id:"基本配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本配置"}},[s._v("#")]),s._v(" 基本配置")]),s._v(" "),n("h3",{attrs:{id:"_1、生成密钥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、生成密钥"}},[s._v("#")]),s._v(" 1、生成密钥")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh/\nssh-keygen -t rsa -C "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my_name"')]),s._v(" -f "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my_key"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这一步会生成 my_key.pub（公钥） my_key(私钥)")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_2、将公钥放在目标服务器上"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、将公钥放在目标服务器上"}},[s._v("#")]),s._v(" 2、将公钥放在目标服务器上")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" ./my_key.pub root@192.168.1.1:/root/.ssh/\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里使用 scp 命令远程复制公钥")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意要存放在登录用户所在目录的 .ssh 文件夹里，这里使用 root 用户登录，故存在 root 用户的用户目录。")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_3、将公钥存放进目标服务器-authorized-keys-里"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、将公钥存放进目标服务器-authorized-keys-里"}},[s._v("#")]),s._v(" 3、将公钥存放进目标服务器 authorized_keys 里")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" my_key.pub "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" authorized_keys\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_4、5、使用免密登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、5、使用免密登录"}},[s._v("#")]),s._v(" 4、5、使用免密登录")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -i ~/.ssh/my_key root@192.168.1.1\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -i 指定私钥的路径")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("基本配置已经完成了，但每一次连接都得手动指定本机的私钥地址，能不能省略这一步呢？")]),s._v(" "),n("h2",{attrs:{id:"进阶配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进阶配置"}},[s._v("#")]),s._v(" 进阶配置")]),s._v(" "),n("p",[s._v("进阶配置中，我们要配置本地 .ssh 下的 config 文件，实现自动登录，而不需要手动指定私钥地址。")]),s._v(" "),n("h3",{attrs:{id:"_1、进入-config-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、进入-config-文件"}},[s._v("#")]),s._v(" 1、进入 config 文件")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh/\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" config\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_2、编辑-config-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、编辑-config-文件"}},[s._v("#")]),s._v(" 2、编辑 config 文件")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("User root\nHost aliyun\nHostName "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.1\nPort "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\nStrictHostKeyChecking no\nIdentityFile ~/.ssh/my_key\nIdentitiesOnly "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nProtocol "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nCompression "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nServerAliveInterval "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\nServerAliveCountMax "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\nLogLevel INFO\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h3",{attrs:{id:"_3、配置完成，体验一下吧"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、配置完成，体验一下吧"}},[s._v("#")]),s._v(" 3、配置完成，体验一下吧")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" aliyun\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_4、配置多个服务器登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、配置多个服务器登录"}},[s._v("#")]),s._v(" 4、配置多个服务器登录")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("Host aliyun\n    User root\n    HostName "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.192")]),s._v(".192.22\n    Port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n    StrictHostKeyChecking no\n    IdentityFile ~/.ssh/my_key\n    IdentitiesOnly "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n    Protocol "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    Compression "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n    ServerAliveInterval "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n    ServerAliveCountMax "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n    LogLevel INFO\n\nHost fanqiang\n    User root\n    HostName "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.192")]),s._v(".192.23\n    Port "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("\n    StrictHostKeyChecking no\n    IdentityFile ~/.ssh/my_key\n    IdentitiesOnly "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n    Protocol "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n    Compression "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n    ServerAliveInterval "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n    ServerAliveCountMax "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n    LogLevel INFO\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"_5、使用免密登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、使用免密登录"}},[s._v("#")]),s._v(" 5、使用免密登录")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" aliyun\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" fanqiang\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),n("p",[s._v("文中的 ip 地址是为了演示，具体的 ip 需要根据服务器真实 ip 来定。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);